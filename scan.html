<!DOCTYPE html>
<html lang="ja">

<head prefix="og: https://ogp.me/ns#">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <meta http-equiv="default-style" content="./style.css">

    <link rel="shortcut icon" href="./favicon.ico" type="image/vnd.microsoft.icon" />
    <link rel="icon" href="./favicon.ico" type="image/vnd.microsoft.icon" />
    <link rel="apple-touch-icon" href="./images/apple-touch-icon.png">

    <meta name="description"
        content="QRコードを用いた外苑祭チケットシステムの読み取りページです。チケットを発行して、URLを共有することで他の人にも共有ができます。読み取り履歴機能もついています。">
    <meta name="author" content="Rio Gunawan">
    <meta name="theme-color" content="#13203a">
    <title>チケット読み取り | 外苑祭チケットシステム</title>

    <meta property="og:site_name" content="外苑祭チケットシステム" />
    <meta property="og:title" content="チケット読み取り | 外苑祭チケットシステム" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://rio-gunawan.github.io/gaiensai-ticket/scan.html" />
    <meta property="og:image" content="https://rio-gunawan.github.io/gaiensai-ticket/images/ogp.png" />
    <meta property="og:description"
        content="QRコードを用いた外苑祭チケットシステムの読み取りページです。チケットを発行して、URLを共有することで他の人にも共有ができます。読み取り履歴機能もついています。" />

</head>

<body>
    <div id="start-scan-overlay">
        <div id="start-scan-box">
            <p>このサイトでは音声が流れます。</p>
            <button id="start-volume-on-button">音声ONで開始</button>
            <button id="start-volume-off-button">音声OFFで開始</button>
        </div>
    </div>
    <header class="scan-header">
        <h1><img src="./images/icho_background.svg" alt="アイコン">チケット読み取り</h1>
    </header>
    <div class="film"></div>
    <div class="mode">
        <div>
            <label>使用するクラス</label>
            <select id="classSelect">
                <option value="21" selected>校内入場</option>
                <option value="0">1-1</option>
                <option value="1">1-2</option>
                <option value="2">1-3</option>
                <option value="3">1-4</option>
                <option value="4">1-5</option>
                <option value="5">1-6</option>
                <option value="6">1-7</option>
                <option value="7">2-1</option>
                <option value="8">2-2</option>
                <option value="9">2-3</option>
                <option value="10">2-4</option>
                <option value="11">2-5</option>
                <option value="12">2-6</option>
                <option value="13">2-7</option>
                <option value="14">3-1</option>
                <option value="15">3-2</option>
                <option value="16">3-3</option>
                <option value="17">3-4</option>
                <option value="18">3-5</option>
                <option value="19">3-6</option>
                <option value="20">3-7</option>
            </select>
            <label>公演回</label>
            <select id="timesSelect">
                <option value="1" selected>第1公演</option>
                <option value="2">第2公演</option>
                <option value="3">第3公演</option>
                <option value="4">第4公演</option>
                <option value="5">第5公演</option>
                <option value="6">第6公演</option>
                <option value="7">第7公演</option>
                <option value="8">第8公演</option>
            </select>
            <button class="img-button" id="scan_settings"><img src="./images/settings.svg" alt="設定"></button>
        </div>
    </div>
    <div class="reader-container">
        <div id="reader"></div>
    </div>
    <div id="result">
        <h2></h2>
        <div class="performance-data-container">
            <h3 id="about-performance"></h3>
            <p id="for-whom"></p>
            <p id="timestamp"></p>
        </div>
        <p class="guide-message"></p>
    </div>
    <div id="settings" class="dialog">
        <h2>設定</h2>
        <button class="text-button close-window" id="close-settings-window"><img src="./images/close.svg"
                alt="閉じる"></button>
        <div>
            <input type="checkbox" class="toggle-switch-checkbox" id="sound-switch" name="sound-switch" checked>
            <label for="sound-switch" class="toggle-switch-label"><span>効果音・音声</span></label>
        </div>
        <div>
            <label>音声の種類</label>
            <select id="soundSelect">
                <option value="1" selected>音声1</option>
                <option value="2">音声2</option>
                <option value="3">音声3</option>
                <option value="sound-effect-only">効果音のみ</option>
            </select>
        </div>
        <div>
            <label>関係が「家族」の場合、そのことを大きく表示</label>
            <select id="attributeSelect">
                <option value="1">常に</option>
                <option value="2" selected>校内入場の時のみ</option>
                <option value="3">オフ</option>
            </select>
        </div>
        <div>
            <input type="checkbox" class="toggle-switch-checkbox" id="attributeCheck" name="attributeCheck">
            <label for="attributeCheck" class="toggle-switch-label"><span>再入場でも、関係が「家族」の場合、そのことを大きく表示</span></label>
        </div>
        <div>
            <a href="./history.html" class="history-button">読み取り履歴</a>
        </div>
    </div>
    <div id="input-directory-dialog" class="dialog">
        <button class="text-button close-window" id="close-input-directory-window"><img src="./images/close.svg"
                alt="閉じる"></button>
        <div>
            <h2>手動で入力</h2>
        </div>
        <div>
            <p>QRコードの下にある英数字を入力してください。</p>
            <input type="text" id="qrInput" name="qrInput">
            <button id="input-directory-summit">確定</button>
        </div>
    </div>
    <div class="attribute">
        <p class="attribute-grade"><span></span>年</p>
        <p class="attribute-relation">保</p>
        <div class="attribute-line"></div>
    </div>
    <button id="input_directory" class="text-button">手動で入力</button>
    <button id="camera_switch" class="img-button"><img src="./images/cameraswitch.svg" alt="カメラ切り替え"></button>
    <footer>
        <div class="footer-container">
            <div class="footer-links">
                <ul>
                    <li><a href="./index.html">トップ</a></li>
                    <li><a href="./issue.html">チケット発券</a></li>
                    <li><a href="./scan.html">チケット読み取り</a></li>
                </ul>
                <ul>
                    <li><a href="./history.html">読み取り履歴</a></li>
                    <li><a href="mailto:ribbongrapes@gmail.com">お問い合わせ</a></li>
                    <li><a href="https://github.com/Rio-Gunawan/gaiensai-ticket">ソースコード</a></li>
                </ul>
            </div>
            <div>
                <p>外苑祭チケットシステム ver. 0.1.1</p>
                <p>最終更新日: 2025/11/18</p>
                <p>&copy; 2025 Rio Gunawan. All rights reserved.</p>
            </div>
        </div>
    </footer>
    <script src="./lib/jquery-3.7.1.min.js"></script>
    <script src="./lib/html5-qrcode.min.js"></script>
    <script src="./main.js"></script>
    <script src="./scan.js"></script>
</body>

</html>